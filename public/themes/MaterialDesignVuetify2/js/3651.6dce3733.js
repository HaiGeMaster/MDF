"use strict";(self["webpackChunkMaterialDesignForum"]=self["webpackChunkMaterialDesignForum"]||[]).push([[3651],{5812:function(t,e,i){i.d(e,{Z:function(){return p}});var o=i(4780),s=function(){var t=this,e=t._self._c;return e(o.Z,{attrs:{text:"",outlined:"",rounded:"",loading:t.loading,disabled:t.disabled,color:"accent"},on:{click:function(e){return t.$emit("cancel")}}},[t._v(" "+t._s(t.text||t.$t("Message.Components.CropperDialog.Cancel"))+" ")])},a=[],n={props:{text:{type:String,default:""},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}},l=n,c=i(1001),r=(0,c.Z)(l,s,a,!1,null,null,null),p=r.exports},7323:function(t,e,i){i.d(e,{Z:function(){return p}});var o=i(4780),s=function(){var t=this,e=t._self._c;return e(o.Z,{attrs:{depressed:"",rounded:"",loading:t.loading,disabled:t.disabled,color:"primary"},on:{click:function(e){return t.$emit("confirm")}}},[t._v(" "+t._s(t.text||t.$t("Message.Components.CropperDialog.Confirm"))+" ")])},a=[],n={props:{text:{type:String,default:""},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}},l=n,c=i(1001),r=(0,c.Z)(l,s,a,!1,null,null,null),p=r.exports},3651:function(t,e,i){i.r(e),i.d(e,{default:function(){return w}});var o=i(4780),s=i(3162),a=i(116),n=i(3198),l=i(2762),c=i(9618),r=i(3231),p=i(8561),d=i(9629),u=function(){var t=this,e=t._self._c;return e(n.Z,{staticStyle:{overflow:"hidden"},attrs:{fullscreen:"xs"==t.$vuetify.breakpoint.name,"max-width":"530px",scrollable:""},model:{value:t.vmodel,callback:function(e){t.vmodel=e},expression:"vmodel"}},[e(s.Z,{class:["topics-dialog","glass-container"],staticStyle:{"padding-bottom":"8px",overflow:"hidden"},attrs:{rounded:t.$store.getters.GetDevice.mobile?"0":"xxl"}},[e("div",{staticClass:"dialog-title",on:{click:function(e){t.vmodel=!t.vmodel}}},[e(o.Z,{staticClass:"close",attrs:{icon:""}},[e(c.Z,[t._v("mdi-close")])],1),t._v(" "+t._s("new"==t.mode?t.$t("Message.Components.TopicsDialog.NewTopic"):t.$t("Message.Components.TopicsDialog.EditTopic"))+" ")],1),e(a.ZB,{staticClass:"dialog-content",style:{height:"xs"!=t.$vuetify.breakpoint.name?"652px":"auto",padding:"0"},attrs:{elevation:"0"}},[e(l.Z,{ref:"form"},[e(p.Z,{attrs:{label:t.$t("Message.Components.TopicsDialog.TopicName"),required:"",counter:"20",maxlength:"20",rules:[e=>!!e||t.$t("Message.Components.TopicsDialog.TopicNameCannotBeEmpty"),e=>(e||"").length<=20||t.$t("Message.Components.TopicsDialog.LengthCannotExceedNCharacters",{value:20})]},model:{value:t.TopicTitle,callback:function(e){t.TopicTitle=e},expression:"TopicTitle"}}),e(d.Z,{attrs:{label:t.$t("Message.Components.TopicsDialog.TopicDescription"),required:"",counter:"1000",maxlength:"1000",rules:[e=>!!e||t.$t("Message.Components.TopicsDialog.TopicDescriptionCannotBeEmpty"),e=>(e||"").length<=1e3||t.$t("Message.Components.TopicsDialog.LengthCannotExceedNCharacters",{value:20})]},model:{value:t.TopicDescription,callback:function(e){t.TopicDescription=e},expression:"TopicDescription"}}),e("div",{staticClass:"cover-wrapper",on:{click:function(e){return t.handleFileSelect()}}},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("Message.Components.TopicsDialog.TopicImage")))]),e("div",{staticClass:"content"},[e("img",{directives:[{name:"show",rawName:"v-show",value:""!=t.TopicCover,expression:"TopicCover!=''"}],ref:"topic_dialog_preview_image",attrs:{src:t.TopicCover,id:"topic_dialog_preview_image"}}),e("div",{staticClass:"placeholder",attrs:{title:t.$t("Message.Components.TopicsDialog.ClickToUploadTopicImage")},on:{click:function(t){}}},[e(c.Z,[t._v("mdi-camera")])],1),e("input",{ref:"topic_dialog_input",staticStyle:{display:"none"},attrs:{type:"file",id:"topic_dialog_input",accept:"image/png"}})])])],1)],1),e(a.h7,[e(r.Z),e("Cancel",{attrs:{text:t.$t("Message.Components.OptionsButton.Cancel")},on:{cancel:function(e){t.vmodel=!t.vmodel}}}),e("Confirm",{attrs:{loading:t.is_loading,text:t.$t("Message.Components.OptionsButton.Submit")},on:{confirm:t.OnSubmit}})],1)],1)],1)},h=[],g=i(7079),m=i(7323),v=i(5812),f={name:"topics-dialog",props:{model:{type:Boolean,default:!1},mode:{type:String,default:"new"},edit_topic:{type:Object,default:null}},components:{Confirm:m.Z,Cancel:v.Z},data:()=>({vmodel:!1,TopicTitle:"",TopicDescription:"",TopicCover:"",is_loading:!1,has_new_cover:!1}),methods:{handleFileSelect(){this.has_new_cover=!0;const t=this.$refs.topic_dialog_input,e=this.$refs.topic_dialog_preview_image,i=this;t.onchange=function(t){const o=t.target.files[0],s=new FileReader;s.onload=function(t){e.src=t.target.result,i.TopicCover=t.target.result,i.$forceUpdate()},s.readAsDataURL(o)},t.click()},async OnSubmit(){if(this.$refs.form.validate())if(this.is_loading=!0,"new"==this.mode){const t=await(0,g.kQ)({title:this.TopicTitle,description:this.TopicDescription,cover:this.$refs.topic_dialog_preview_image.src,user_token:this.$G_GetUserToken()});1==t.data.is_add?(this.$emit("add_topic",t.data.topic),this.is_loading=!1,this.vmodel=!1):this.is_loading=!1}else if("edit"==this.mode){const t=this.$refs.topic_dialog_preview_image.src,e=await(0,g.XR)({topic_id:this.edit_topic.topic_id,title:this.TopicTitle,description:this.TopicDescription,cover:-1!=t.indexOf("covers")?"":t,user_token:this.$G_GetUserToken()});1==e.data.is_edit?(this.$emit("edit_topic",e.data.topic),this.has_new_cover=!1,this.is_loading=!1,this.vmodel=!1):this.is_loading=!1,this.has_new_cover=!1}}},watch:{model(t){1==t&&(this.vmodel=!0)},vmodel(t){0==t&&(this.TopicTitle="",this.TopicDescription="",this.TopicCover="",this.$emit("model",!1))},edit_topic:{handler(t){null!=t&&(this.TopicTitle=t.name,this.TopicDescription=t.description,this.TopicCover=this.$G_ImgHandle(t.cover.original))},deep:!0,immediate:!0}}},_=f,T=i(1001),C=(0,T.Z)(_,u,h,!1,null,null,null),w=C.exports},9629:function(t,e,i){i.d(e,{Z:function(){return n}});var o=i(8561),s=i(5218);const a=(0,s.Z)(o.Z);var n=a.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...o.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(i,e)+"px"},genInput(){const t=o.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){o.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})}}]);